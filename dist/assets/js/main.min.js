var totals = {};
$(document).ready(function() {
  function a(a) {
    totals[a] = 0, $("#" + a + " tr").not(".label").each(function() {
      var b = Number($(this).find("input").val()),
        c = Number($(this).find("option:selected").val()),
        d = Math.round(100 * b * c) / 100;
      d = d < 0 ? 0 : d, totals[a] = totals[a] + d
    })
  }

  function b() {
    totals.spending = 0, $.each(totals, function(a, b) {
      "income" !== a && "spending" !== a && "net" !== a && (totals.spending += totals[a])
    }), totals.net = totals.income - totals.spending
  }

  function c() {
    $("#inputs").removeClass("on"), $("#results").addClass("on"), $(".bar.income").css("width", "170px"), $(".bar.spending").css("width", 170 * totals.spending / totals.income + "px"), $(".bar.net").css("width", 170 * totals.net / totals.income + "px"), $(".bar.income").parent().find("h4").text("$" + totals.income), $(".bar.spending").parent().find("h4").text("$" + totals.spending), $(".bar.net").parent().find("h4").text("$" + totals.net);
    var a = 0;
    $.each(totals, function(b, c) {
      if ("income" !== b && "spending" !== b && "net" !== b) {
        var d = 360 * totals[b] / totals.spending,
          e = d / 2;
        d >= 180 && $("#pie-chart ." + b).addClass("big"), d <= 37 && $(".pie." + b + " .label").css("display", "none"), $(".pie." + b).css("transform", "rotate(" + a + "deg)"), $(".pie." + b + " .slice").css("transform", "rotate(" + d + "deg)"), $(".pie." + b + " .label").html("<h4>$" + totals[b] + "</h4>"), $(".pie." + b + " .label").css("transform", "rotate(" + e + "deg)"), $(".pie." + b + " h4").css("transform", "rotate(-" + (e + a) + "deg)"), a += d
      }
    })
  }
  $("#calculator ul li").on("click", function() {
    $(this).attr("id");
    $(this).addClass("active"), $(this).siblings().removeClass("active")
  }), $("#inputs button").on("click", function() {
    a("income"), a("livingExpenses"), a("insurance"), a("loans"), a("transport"), a("leisure"), b(), c()
  }), $("#results button").on("click", function() {
    $(this).parent().removeClass("on"), $("#inputs").addClass("on")
  })
});
